extends Control

@onready var textedit = $AspectRatioContainer/TextEdit
var usage: Vector2 = Vector2(0, -2)

# Dictionary of coordinates and their level names
var level_lookup: Dictionary = {
	"12.42.0": "track",
	"00.00.1": "level_test",
	"11.11.1": "ARCHIVE",
	"00.00.2": "level_test_2"
}

func get_usage() -> Vector2:
	return usage

func _ready() -> void:
	# Connect the signal manually if it's not connected in the editor
	textedit.text_submitted.connect(_on_TextEdit_text_submitted)

func _on_TextEdit_text_submitted(coordinates: String) -> void:
	tp(coordinates)

func tp(coordinates: String) -> void:
	if level_lookup.has(coordinates):
		var level_name = level_lookup[coordinates]
		var level_path = "res://levels/%s.tscn" % level_name
		print("Teleporting to: ", level_path)

		# Make sure LevelManager exists before calling it
		var level_manager = get_node("/root/LevelManager")
		if level_manager:
			level_manager.load_level(level_path)
		else:
			print("Error: LevelManager not found!")
	else:
		push_error("Invalid coordinates: '%s'" % coordinates)
